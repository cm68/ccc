; Generated from lib/libu/sbreak.o by wsnm -g
	.extern c.ret
	.extern c.ent
	.extern __memory
	.extern __break
	.global _brk
	.global _sbreak
	.global _sbrk

	.text
_.text:
_sbreak:
	call c.ent
	push af
	push af
	push af
	push af
	ld hl,0fff8h
	add hl,de
	push hl
	ld hl,0004h
	add hl,de
	ld c,(hl)
	inc hl
	ld b,(hl)
	push bc
	call _sbrk
	pop af
	pop hl
	ld a,c
	ld (hl),a
	ld a,b
	inc hl
	ld (hl),a
	ld hl,0fff8h
	add hl,de
	ld a,(hl)
	cp 0ffh
	jp nz,_sbreak+44
	inc hl
	ld a,(hl)
	cp 0ffh
	jp nz,_sbreak+53
	ld bc,0000h
	jp c.ret
	ld hl,0fff8h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ld c,l
	ld b,h
	jp c.ret
_sbrk:
	call c.ent
	ld hl,0fff6h
	add hl,sp
	ld sp,hl
	ld hl,0fff8h
	add hl,de
	ld a,(_.data+0)
	ld (hl),a
	ld a,(_.data+1)
	inc hl
	ld (hl),a
	ld hl,0fff6h
	add hl,de
	push hl
	ld hl,0fff8h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	push hl
	ld hl,0004h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ex (sp),hl
	pop bc
	add hl,bc
	pop bc
	ld a,l
	ld (bc),a
	ld a,h
	inc bc
	ld (bc),a
	ld hl,0fff6h
	add hl,de
	ld c,(hl)
	inc hl
	ld b,(hl)
	push bc
	call __break
	pop af
	ld a,c
	cp 0ffh
	jp nz,_sbrk+73
	ld a,b
	cp 0ffh
	jp nz,_sbrk+82
	ld bc,0ffffh
	jp c.ret
	ld hl,0fff6h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ld (_.data+0),hl
	ld hl,0fff8h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ld c,l
	ld b,h
	jp c.ret
_brk:
	call c.ent
	ld hl,0fff6h
	add hl,sp
	ld sp,hl
	ld hl,0fff8h
	add hl,de
	ld a,(_.data+0)
	ld (hl),a
	ld a,(_.data+1)
	inc hl
	ld (hl),a
	ld hl,0fff6h
	add hl,de
	push hl
	ld hl,0004h
	add hl,de
	pop bc
	ld a,(hl)
	ld (bc),a
	inc hl
	ld a,(hl)
	inc bc
	ld (bc),a
	ld hl,0fff6h
	add hl,de
	ld c,(hl)
	inc hl
	ld b,(hl)
	push bc
	call __break
	pop af
	ld a,c
	cp 0ffh
	jp nz,_brk+58
	ld a,b
	cp 0ffh
	jp nz,_brk+67
	ld bc,0ffffh
	jp c.ret
	ld hl,0fff6h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ld (_.data+0),hl
	ld hl,0fff8h
	add hl,de
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	ld c,l
	ld b,h
	jp c.ret

	.data
_.data:
	.dw __memory
;
; vim: tabstop=4 shiftwidth=4 noexpandtab:
;
